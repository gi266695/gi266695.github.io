<!DOCTYPE html>
<html>
<head>
<script src="Core/MainLoop.js"></script>
</head>
<body>
<div>
    <h1>Header!!</h1>
    <p id="demo"></p>
</div>
<div id="sourceWindow" style="height:500px; background:black;">
</div>
<script> //Mainloop should be loaded becuase this comes after it
    var sourceWindow = document.getElementById("sourceWindow");
    var DemoObj = document.getElementById("demo"); 

    var spritePath = "Data/Structures/Splash/splashbullet.sprite";


    //Mainloop.js
    Core_Init(window, document, sourceWindow, "Core/", Tick);

    var FirstTick = true;
    var LoadedAssets = false;
    var increment = 0.0;

    var testSprite = null;
    var testLayer = null;


    function Tick(coreData, DeltaTime){
        increment += DeltaTime / 1000;

        if(FirstTick){
            FirstTick = false;

            var TestLoads = ["testing123",
                             "testing123.png",
                             "testing1234_sheet.json",
                             "testing1234_anim.json",
                             "testing123455654_sprite.json",
                             "Data/Structures/Splash/splashbullet_sprite.json",
                             "Data/Structures/Splash/testStar_sprite.json",];

            coreData.AssetLibrary.LoadAssets(TestLoads, local_Isloaded);

            function local_Isloaded(){
                console.log('assets loaded');
                LoadedAssets = true;
            }
        }
        if(LoadedAssets && testSprite == null){
            testLayer = new GameLayer();
            coreData.LayerStack.AddLayer(testLayer, 1);

            testSprite = coreData.AssetLibrary.SpriteInstance_GetSpriteInstance("Data/Structures/Splash/testStar_sprite.json");
            testSprite.LocalTransform.TranslateSelf(100,100);

            testLayer.AddInstance(testSprite, 0);
        }
        DemoObj.innerHTML = DeltaTime + "<br>";

        //tick layer stack
        coreData.LayerStack.Tick(coreData, DeltaTime);
        coreData.LayerStack.Draw(coreData);
    }
</script>
</body>
</html>